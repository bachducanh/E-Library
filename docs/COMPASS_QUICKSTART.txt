â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Káº¾T Ná»I MONGODB COMPASS - HÆ¯á»šNG DáºªN NHANH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â­ Káº¾T Ná»I CHÃNH (Khuyáº¿n nghá»‹):
   mongodb://localhost:27020/

   â†’ Káº¿t ná»‘i qua mongos router
   â†’ Xem toÃ n bá»™ sharded cluster
   â†’ Database: elibrary
   â†’ Collections: branches, books, copies, members, loans, transactions

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Œ CÃC Káº¾T Ná»I KHÃC:

Shard 1 (rsCity):
  - hn1 (PRIMARY):  mongodb://localhost:27017/?directConnection=true
  - hp1 (SECONDARY): mongodb://localhost:27018/?directConnection=true  
  - dn1 (SECONDARY): mongodb://localhost:27019/?directConnection=true

Shard 2 (rsExtra):
  - ex1 (PRIMARY):  mongodb://localhost:27217/?directConnection=true
  - ex2 (SECONDARY): mongodb://localhost:27218/?directConnection=true

Config Servers:
  - cfg1: mongodb://localhost:27117/?directConnection=true
  - cfg2: mongodb://localhost:27118/?directConnection=true
  - cfg3: mongodb://localhost:27119/?directConnection=true

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” Lá»†NH XEM NHANH:

# Count táº¥t cáº£ collections
docker exec mongos1 mongosh --port 27020 elibrary --quiet --eval "
  print('branches:', db.branches.countDocuments());
  print('books:', db.books.countDocuments());
  print('copies:', db.copies.countDocuments());
  print('members:', db.members.countDocuments());
  print('loans:', db.loans.countDocuments());
  print('transactions:', db.transactions.countDocuments());
"

# Xem branches
docker exec mongos1 mongosh --port 27020 elibrary --quiet --eval "db.branches.find().pretty()"

# Xem shard distribution
docker exec mongos1 mongosh --port 27020 elibrary --quiet --eval "db.copies.getShardDistribution()"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“– Chi tiáº¿t Ä‘áº§y Ä‘á»§: /home/dtnntd/csdl/final/MONGODB_COMPASS.md
